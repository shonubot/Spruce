app-id: io.github.shonubot.Spruce
runtime: org.gnome.Platform
runtime-version: '48'        # Update soon
sdk: org.gnome.Sdk
command: spruce

finish-args:
  # GUI access
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  # Filesystem access
  - --filesystem=xdg-cache
  - --filesystem=host:ro

modules:
  - name: spruce
    buildsystem: simple
    build-commands:
      - install -Dm755 src/spruce/app.py /app/bin/spruce
      - chmod 0755 /app/bin/spruce
      - install -Dm644 ui/window.ui /app/ui/window.ui
      - install -Dm644 data/desktop/io.github.shonubot.Spruce.desktop /app/share/applications/io.github.shonubot.Spruce.desktop
      - install -Dm644 data/appdata/io.github.shonubot.Spruce.metainfo.xml /app/share/metainfo/io.github.shonubot.Spruce.metainfo.xml
      - install -Dm644 data/icons/hicolor/scalable/apps/io.github.shonubot.Spruce.svg /app/share/icons/hicolor/scalable/apps/io.github.shonubot.Spruce.svg
      - install -Dm644 data/icons/hicolor/symbolic/apps/io.github.shonubot.Spruce-symbolic.svg /app/share/icons/hicolor/symbolic/apps/io.github.shonubot.Spruce-symbolic.svg
    sources:
      - type: dir
        path: .

